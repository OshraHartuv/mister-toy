(function(e){function t(t){for(var n,a,i=t[0],u=t[1],c=t[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&p.push(s[a][0]),s[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==s[u]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},s={app:0},o=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1ded":function(e,t){e.exports="data:image/png;base64,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"},4678:function(e,t,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-layout",attrs:{id:"app"}},[r("main-header"),r("router-view")],1)},o=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-header",attrs:{id:"nav"}},[r("div",[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),r("router-link",{attrs:{to:"/about"}},[e._v("About")]),r("router-link",{attrs:{to:"/toy"}},[e._v("Toy shop")])],1),r("div",[e.user?e._e():r("router-link",{attrs:{to:"/login"}},[e._v("Login")]),e.user?r("span",[e._v(e._s(e.user.fullname))]):e._e(),e.user&&e.user.isAdmin?r("router-link",{attrs:{to:"/userlist"}},[e._v("Users List")]):e._e(),e.user?r("button",{on:{click:e.logout}},[e._v("Logout")]):e._e()],1)])},i=[],u=r("1da1"),c=(r("96cf"),{computed:{user:function(){return this.$store.getters.user}},methods:{logout:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"logout"});case 3:"/"!==e.$route.fullPath&&e.$router.push("/"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("problem with logout",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}}),l=c,d=r("0c7c"),p=Object(d["a"])(l,a,i,!1,null,null,null),f=p.exports,v={components:{mainHeader:f}},m=v,h=Object(d["a"])(m,s,o,!1,null,null,null),g=h.exports,y=r("8c4f"),b=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("img",{staticClass:"teddy",attrs:{alt:"Vue logo",src:r("f737")}}),n("h3",[e._v("Welcome to vuex toy shop!")])])}],j={name:"Home"},_=j,x=Object(d["a"])(_,b,w,!1,null,null,null),k=x.exports,T=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},O=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("h1",[e._v("This is an about page")]),r("p",[e._v("Lorem, ipsum dolor sit amet consectetur adipisicing elit. Esse error dolorem facere nulla exercitationem velit corporis nisi, iure impedit alias saepe aperiam laborum temporibus libero, sint consequatur, veritatis sit quisquam.")])])}],E={},R=Object(d["a"])(E,T,O,!1,null,null,null),L=R.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"toy-app main-layout full"},[r("toy-filter"),r("router-link",{staticClass:"add-link",attrs:{to:"/toy/edit/"}},[e._v("Add toy")]),e.isLoading?r("p",[e._v("Loading...")]):r("toy-list",{attrs:{toys:e.toys}})],1)},A=[],C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"toy-filter"},[r("div",{staticClass:"filter"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.status,expression:"filterBy.status"}],on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.filterBy,"status",t.target.multiple?r:r[0])},e.filter]}},[r("option",{attrs:{value:"all"}},[e._v("All")]),r("option",{attrs:{value:"inStock"}},[e._v("In stock")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.txt,expression:"filterBy.txt"}],attrs:{type:"text",placeholder:"Search Toy"},domProps:{value:e.filterBy.txt},on:{input:[function(t){t.target.composing||e.$set(e.filterBy,"txt",t.target.value)},e.filter]}}),r("el-select",{directives:[{name:"show",rawName:"v-show",value:e.labels.length,expression:"labels.length"}],attrs:{multiple:"",placeholder:"Search labels"},on:{change:e.filter},model:{value:e.filterBy.labels,callback:function(t){e.$set(e.filterBy,"labels",t)},expression:"filterBy.labels"}},e._l(e.labels,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e.name}})})),1)],1),r("div",{staticClass:"sort"},[e._v(" Sort: "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sortBy=t.target.multiple?r:r[0]},e.setSort]}},[r("option",{attrs:{value:"txt"}},[e._v("Name")]),r("option",{attrs:{value:"priceLow"}},[e._v("Price (low to high)")]),r("option",{attrs:{value:"priceHigh"}},[e._v("Price (high to low)")]),r("option",{attrs:{value:"date"}},[e._v("Date")])])])])},B=[],I=(r("e9c4"),{data:function(){return{filterBy:{status:"all",txt:"",labels:[]},showLabels:!1,sortBy:"date"}},computed:{labels:function(){return this.$store.getters.getLabels}},methods:{filter:function(){this.$store.dispatch({type:"setFilter",filterBy:JSON.parse(JSON.stringify(this.filterBy))})},setSort:function(){this.$store.dispatch({type:"setSort",sortBy:this.sortBy})}}}),U=I,P=Object(d["a"])(U,C,B,!1,null,null,null),$=P.exports,N="show-msg",z=new n["default"];function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";z.$emit(N,{txt:e,type:t})}r("99af");var q=r("bc3a"),V=r.n(q),F="/api/",D=V.a.create({withCredentials:!0}),H={get:function(e,t){return K(e,"GET",t)},post:function(e,t){var r=K(e,"POST",t);return console.log("axios",r),r},put:function(e,t){return K(e,"PUT",t)},delete:function(e,t){return K(e,"DELETE",t)}};function K(e){return Y.apply(this,arguments)}function Y(){return Y=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,D({url:"".concat(F).concat(t),method:r,data:n,params:"GET"===r?n:null});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data:"),n),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(void 0).push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),Y.apply(this,arguments)}V.a.create({withCredentials:!0});var Q={query:G,remove:te,save:ne,getEmptyToy:oe,getById:Z,getLabels:W};function G(){return M.apply(this,arguments)}function M(){return M=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,H.get("toy/",{params:t});case 4:return r=e.sent,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](1),console.log("err with query toys",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),M.apply(this,arguments)}function W(){return X.apply(this,arguments)}function X(){return X=Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.get("toy/label");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e["catch"](0),console.log("err while getting labels",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),X.apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return ee=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.get("toy/".concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e["catch"](0),console.log("err while getting toy id:"+t,e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ee.apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return re=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.delete("toy/".concat(t));case 3:return e.abrupt("return",t);case 6:e.prev=6,e.t0=e["catch"](0),console.log("err while removing toy with id:"+t,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),re.apply(this,arguments)}function ne(e){return se.apply(this,arguments)}function se(){return se=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t._id){e.next=13;break}return e.prev=1,e.next=4,H.put("toy/".concat(t._id),t);case 4:return r=e.sent,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](1),console.log("err while updating toy:"+t,e.t0);case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,H.post("toy/",t);case 16:return n=e.sent,e.abrupt("return",n.ops[0]);case 20:e.prev=20,e.t1=e["catch"](13),console.log("err while saving toy:"+t,e.t1);case 23:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])}))),se.apply(this,arguments)}function oe(){return{name:"",price:null,labels:[],createdAt:null,inStock:!0}}window.cs=Q;var ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"toy-list"},e._l(e.toys,(function(e){return r("div",{key:e._id},[r("toy-preview",{attrs:{toy:e}})],1)})),0)},ie=[],ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"toy-preview"},[r("div",{staticClass:"preview-container"},[r("h4",[r("span",[e._v(e._s(e.toy.name))]),r("div",[e._v("$"+e._s(e.toy.price))])]),r("div",{staticClass:"preview-actions"},[r("router-link",{attrs:{to:"/toy/"+e.toy._id}},[e._v("Details")]),r("router-link",{attrs:{to:"/toy/edit/"+e.toy._id}},[e._v("Edit")]),r("button",{on:{click:e.removeToy}},[e._v("Delete")])],1)])])},ce=[],le={props:{toy:{type:Object}},data:function(){return{}},created:function(){},methods:{editToy:function(){z.$emit("editToy",this.toyToEdit)},removeToy:function(){z.$emit("removeToy",this.toyToEdit._id)}},computed:{toyToEdit:function(){return JSON.parse(JSON.stringify(this.toy))}}},de=le,pe=Object(d["a"])(de,ue,ce,!1,null,null,null),fe=pe.exports,ve={props:{toys:{type:Array}},components:{toyPreview:fe}},me=ve,he=Object(d["a"])(me,ae,ie,!1,null,null,null),ge=he.exports,ye={created:function(){z.$on("removeToy",this.deleteToy)},destroyed:function(){z.$off("removeToy",this.deleteToy);var e={status:"all",txt:"",labels:[]};this.$store.dispatch({type:"setFilter",filterBy:e})},computed:{toys:function(){return this.$store.getters.filteredToys},isLoading:function(){return this.$store.getters.isLoading}},methods:{deleteToy:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"removeToy",toyId:e});case 3:J("Toy deleted"),r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log("problem with deleting toy",r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},toggleAdd:function(){this.isAdd=!this.isAdd,this.isAdd?this.toyToAdd=Q.getEmptyToy():this.toyToAdd=null}},components:{toyList:ge,toyFilter:$}},be=ye,we=Object(d["a"])(be,S,A,!1,null,null,null),je=we.exports,_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"toy-details"},[r("router-link",{attrs:{to:"/toy"}},[e._v("Back")]),e.toy?r("div",{staticClass:"toy-details"},[r("h3",[r("span",[e._v(e._s(e.toy.name))])]),r("p",[e._v("Price $"+e._s(e.toy.price))]),r("p",[e.toy.labels?r("span",[e._v("Labels:")]):e._e(),e._l(e.toy.labels,(function(t,n){return r("span",{key:t},[e._v(" "+e._s(t)+" "),r("span",{directives:[{name:"show",rawName:"v-show",value:n!==e.toy.labels.length-1,expression:"idx!==toy.labels.length-1"}]},[e._v("|")])])}))],2),r("p",[e._v(e._s(e.toy.inStock?"In Stock":"Currently out of Stock"))]),e.toy.review?r("h3",[e._v("Reviews:")]):e._e(),e._l(e.toy.review,(function(t,n){return r("span",{key:n},[r("h4",[e._v("Review n. "+e._s(n+1))]),r("p",[e._v(e._s(t.txt))]),r("p",[e._v("By: "+e._s(t.byUser.fullname))])])})),r("p",[r("span",[e._v("Created At:")]),e._v(" "+e._s(e.timeToShow)+" ")]),r("small",[e._v("Id: "+e._s(e.toy._id))])],2):e._e(),r("chat-room")],1)},xe=[],ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},Te=[],Oe={},Ee=Oe,Re=Object(d["a"])(Ee,ke,Te,!1,null,null,null),Le=Re.exports,Se={data:function(){return{toy:null}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.params.toyId,t.prev=1,t.next=4,Q.getById(r);case 4:n=t.sent,e.toy=n,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("problem with getting toy in detailed",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},methods:{},computed:{timeToShow:function(){return new Date(this.toy.createdAt).toLocaleString().substring(0,17)}},components:{chatRoom:Le}},Ae=Se,Ce=Object(d["a"])(Ae,_e,xe,!1,null,null,null),Be=Ce.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.toyToEdit?r("section",{staticClass:"toy-edit"},[r("router-link",{attrs:{to:"/toy"}},[e._v("Back")]),e.toyToEdit?r("div",{staticClass:"toy-details"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.editToy()}}},[r("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e._v(" Name: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.toyToEdit.name,expression:"toyToEdit.name"}],attrs:{type:"text"},domProps:{value:e.toyToEdit.name},on:{input:function(t){t.target.composing||e.$set(e.toyToEdit,"name",t.target.value)}}}),r("div",[e._v(e._s(n[0]))])]}}],null,!1,2041910189)}),r("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e._v(" Price: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.toyToEdit.price,expression:"toyToEdit.price"}],attrs:{type:"number"},domProps:{value:e.toyToEdit.price},on:{input:function(t){t.target.composing||e.$set(e.toyToEdit,"price",t.target.value)}}}),r("div",[e._v(e._s(n[0]))])]}}],null,!1,1927926073)}),r("multi-select",{attrs:{toy:e.toyToEdit},on:{updateLabels:e.addLabels}}),e.toyToEdit._id?r("p",[r("span",[e._v("Created At:")]),e._v(" "+e._s(e.timeToShow)+" ")]):e._e(),e.toyToEdit._id?r("small",[e._v("Id: "+e._s(e.toyToEdit._id))]):e._e(),r("div",[r("button",[e._v(e._s(e.toyToEdit._id?"Update":"Add"))])])],1)]):e._e()],1):e._e()},Ue=[],Pe=r("5530"),$e=(r("b0c0"),r("d81d"),r("a15b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-select",{attrs:{multiple:"",placeholder:"Select"},on:{change:e.selectedVal},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.labels,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e.name}})})),1)}),Ne=[],ze={props:{toy:{type:Object,default:null}},data:function(){return{selected:null,labels:null}},created:function(){this.labels=this.$store.getters.getLabels,this.toy&&(this.selected=this.toy.labels)},methods:{selectedVal:function(){this.$emit("updateLabels",this.selected)}}},Je=ze,qe=Object(d["a"])(Je,$e,Ne,!1,null,null,null),Ve=qe.exports,Fe=r("7bb1"),De=r("4c93");Object(Fe["b"])("required",Object(Pe["a"])(Object(Pe["a"])({},De["a"]),{},{message:"This field is required"}));var He={data:function(){return{toyToEdit:null,labels:[]}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.params.toyId,!r){t.next=14;break}return t.prev=2,t.next=5,Q.getById(r);case 5:n=t.sent,e.toyToEdit=JSON.parse(JSON.stringify(n)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log("problem with getting toy(created-edit)",t.t0);case 12:t.next=15;break;case 14:e.toyToEdit=Q.getEmptyToy();case 15:case"end":return t.stop()}}),t,null,[[2,9]])})))()},methods:{editToy:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.toyToEdit.name&&e.toyToEdit.price){t.next=2;break}return t.abrupt("return");case 2:return e.toyToEdit._id||(e.toyToEdit.createdAt=Date.now()),t.prev=3,t.next=6,e.$store.dispatch({type:"saveToy",toy:e.toyToEdit});case 6:e.$router.push("/toy"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),console.log("problem with edit toy:"+e.toyToEdit,err);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})))()},addLabels:function(e){this.toyToEdit.labels=e}},computed:{timeToShow:function(){return new Date(this.toyToEdit.createdAt).toLocaleString().substring(0,17)},checkedLabels:function(){var e=this.toyToEdit.labels.map((function(e){return e.txt}));return e.join(", ")}},components:{multiSelect:Ve,ValidationProvider:Fe["a"]}},Ke=He,Ye=Object(d["a"])(Ke,Ie,Ue,!1,null,null,null),Qe=Ye.exports,Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("form",{on:{submit:function(t){return t.preventDefault(),e.login()}}},[r("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e._v(" Username: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),r("div",[e._v(e._s(n[0]))])]}}])}),r("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e._v(" Password: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),r("div",[e._v(e._s(n[0]))])]}}])}),e._m(0)],1),r("div",[r("router-link",{attrs:{to:"/signup"}},[e._v("Signup")])],1)])},Me=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",[e._v("Add")])])}];Object(Fe["b"])("required",Object(Pe["a"])(Object(Pe["a"])({},De["a"]),{},{message:"This field is required"}));var We={data:function(){return{user:{username:null,password:null}}},destroyed:function(){this.user={username:null,password:null}},methods:{login:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"login",user:e.user});case 3:r=t.sent,r&&e.$router.push("/toy"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("problem with add user"+e.user,t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},components:{ValidationProvider:Fe["a"]}},Xe=We,Ze=Object(d["a"])(Xe,Ge,Me,!1,null,null,null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("form",{on:{submit:function(t){return t.preventDefault(),e.addUser()}}},[r("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e._v(" Full name: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.fullname,expression:"user.fullname"}],attrs:{type:"text"},domProps:{value:e.user.fullname},on:{input:function(t){t.target.composing||e.$set(e.user,"fullname",t.target.value)}}}),r("div",[e._v(e._s(n[0]))])]}}])}),r("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e._v(" Username: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),r("div",[e._v(e._s(n[0]))])]}}])}),r("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e._v(" Password: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),r("div",[e._v(e._s(n[0]))])]}}])}),e._m(0)],1),r("div",[r("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1)])},rt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",[e._v("Add")])])}];Object(Fe["b"])("required",Object(Pe["a"])(Object(Pe["a"])({},De["a"]),{},{message:"This field is required"}));var nt,st,ot={data:function(){return{user:{fullname:null,username:null,password:null}}},methods:{addUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"addUser",user:e.user});case 3:e.$router.push("/toy"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("problem with add user"+e.user,t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},components:{ValidationProvider:Fe["a"]}},at=ot,it=Object(d["a"])(at,tt,rt,!1,null,null,null),ut=it.exports,ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.users?r("section",e._l(e.users,(function(t){return r("div",{key:t._id},[r("div",{staticClass:"user-card"},[r("div",[e._v("Name: "+e._s(t.fullname))]),r("div",[e._v("Username: "+e._s(t.username))]),r("div",[e._v("Id: "+e._s(t._id))]),r("div",[e._v("Created at: "+e._s(t.createdAt.substring(0,10)))]),t.isAdmin?e._e():r("button",{on:{click:function(r){return e.remove(t)}}},[e._v("Delete")])])])})),0):e._e()},lt=[],dt={created:function(){this.$store.dispatch({type:"loadUsers"})},computed:{users:function(){return this.$store.getters.users},user:function(){var e=this.$store.getters.user;return e&&e.isAdmin||this.$router.push("/login"),e}},methods:{remove:function(e){this.$store.dispatch({type:"deleteUser",user:e})}}},pt=dt,ft=Object(d["a"])(pt,ct,lt,!1,null,null,null),vt=ft.exports,mt=(r("4de4"),r("d3b7"),r("caad"),r("2532"),r("1fca")),ht={extends:mt["a"],computed:{toys:function(){return this.$store.getters.toys},labels:function(){return this.$store.getters.getLabels},price:function(){var e=this;if(this.toys&&this.labels)return this.toys.filter((function(t){return e.labels.some((function(e){return t.labels.includes(e)}))}))}},mounted:function(){this.renderChart({labels:this.labels,datasets:[{label:"GitHub Commits",backgroundColor:"#f87979",data:this.price}]})}},gt=ht,yt=Object(d["a"])(gt,nt,st,!1,null,null,null),bt=yt.exports,wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container home"},[r("ul",{staticClass:"review-list"},e._l(e.reviews,(function(t){return r("li",{key:t._id},[r("p",[e._v(" About "),r("router-link",{attrs:{to:"toy/"+t.aboutToy._id}},[e._v(e._s(t.aboutToy.name))])],1),r("h3",[e._v(e._s(t.txt))]),t.imgUrls?r("section",e._l(t.imgUrls,(function(e){return r("img",{key:e,attrs:{src:e,alt:""}})})),0):e._e(),r("p",[e._v(" By "),r("router-link",{attrs:{to:"user/"+t.byUser._id}},[e._v(e._s(t.byUser.fullname))])],1),r("hr")])})),0),r("hr"),e.loggedInUser?r("form",{on:{submit:function(t){return t.preventDefault(),e.addReview()}}},[r("h2",[e._v("Your gossip:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.aboutToyId,expression:"reviewToEdit.aboutToyId"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reviewToEdit,"aboutToyId",t.target.multiple?r:r[0])}}},e._l(e.toys,(function(t){return r("option",{key:t._id,domProps:{value:t._id}},[e._v(e._s(t.name))])})),0),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.txt,expression:"reviewToEdit.txt"}],attrs:{placeholder:"Your Opinion Matters..."},domProps:{value:e.reviewToEdit.txt},on:{input:function(t){t.target.composing||e.$set(e.reviewToEdit,"txt",t.target.value)}}}),r("div",{staticClass:"upload"},[r("img-upload",{on:{onSaveImg:e.saveImg}}),r("section",{staticClass:"img-list"},e._l(e.reviewToEdit.imgUrls,(function(e){return r("img",{key:e,attrs:{src:e,alt:""}})})),0)],1),r("button",[e._v("Save")])]):e._e()])},jt=[],_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"img-upload-container"},[e.isLoading?n("img",{attrs:{src:r("ebb8"),alt:""}}):n("label",{staticClass:"clickable"},[n("img",{attrs:{src:r("1ded"),alt:""}}),n("input",{attrs:{type:"file",id:"uploadImg",hidden:""},on:{change:e.onUploadImg}})])])},xt=[],kt=function(e){var t="jjyguy2o",r="oshra",n="https://api.cloudinary.com/v1_1/".concat(r,"/image/upload"),s=new FormData;return s.append("file",e.target.files[0]),s.append("upload_preset",t),fetch(n,{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))},Tt={data:function(){return{isLoading:!1}},methods:{onUploadImg:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,r.next=3,kt(e);case 3:n=r.sent,t.$emit("onSaveImg",n.url),t.isLoading=!1;case 6:case"end":return r.stop()}}),r)})))()}}},Ot=Tt,Et=(r("7c52"),Object(d["a"])(Ot,_t,xt,!1,null,null,null)),Rt=Et.exports,Lt={name:"home",data:function(){return{reviewToEdit:{txt:"",aboutToyId:null,imgUrls:[]}}},computed:{reviews:function(){return console.log("reviews",this.$store.getters.reviews),this.$store.getters.reviews},toys:function(){return console.log(this.$store.getters.filteredToys),this.$store.getters.filteredToys},loggedInUser:function(){return console.log(this.$store.getters.user),this.$store.getters.user}},created:function(){this.$store.dispatch({type:"loadUser"}),this.$store.dispatch({type:"loadReviews"}),this.$store.dispatch({type:"loadToys"})},methods:{addReview:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"addReview",review:e.reviewToEdit});case 2:e.reviewToEdit={txt:"",aboutToyId:null,imgUrls:[]};case 3:case"end":return t.stop()}}),t)})))()},saveImg:function(e){this.reviewToEdit.imgUrls.push(e),console.log(this.reviewToEdit)}},components:{imgUpload:Rt}},St=Lt,At=Object(d["a"])(St,wt,jt,!1,null,null,null),Ct=At.exports;n["default"].use(y["a"]);var Bt=[{path:"/",name:"Home",component:k},{path:"/login",name:"Login",component:et},{path:"/userlist",name:"userList",component:vt},{path:"/signup",name:"signup",component:ut},{path:"/about",name:"About",component:L},{path:"/review",name:"review",component:Ct},{path:"/toy",name:"toy-app",component:je},{path:"/dashboard",name:"charts",component:bt},{path:"/toy/edit/:toyId?",name:"toy-edit",component:Qe},{path:"/toy/:toyId",name:"toy-details",component:Be}],It=new y["a"]({routes:Bt}),Ut=It,Pt=r("2f62"),$t=r("2909"),Nt=(r("ac1f"),r("00b4"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("4e82"),r("c740"),r("a434"),{strict:!0,state:{toys:[],filterBy:{txt:"",status:"all",labels:[]},labels:[],isLoading:!1,sortBy:"date"},getters:{filteredToys:function(e){var t=Object($t["a"])(e.toys);return"inStock"===e.filterBy.status&&(t=e.toys.filter((function(e){return e.inStock}))),t=t.filter((function(t){return new RegExp(e.filterBy.txt,"i").test(t.name)})),e.filterBy.labels.length&&(t=t.filter((function(t){return e.filterBy.labels.every((function(e){return t.labels.includes(e)}))}))),t="txt"===e.sortBy?t.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})):"date"===e.sortBy?t.sort((function(e,t){return t.createdAt-e.createdAt})):"priceLow"===e.sortBy?t.sort((function(e,t){return e.price-t.price})):t.sort((function(e,t){return t.price-e.price})),t},isLoading:function(e){var t=e.isLoading;return t},getLabels:function(e){return JSON.parse(JSON.stringify(e.labels))}},mutations:{setToys:function(e,t){var r=t.toys;e.toys=r},setLabels:function(e,t){var r=t.labels;e.labels=r},setLoading:function(e,t){var r=t.isLoading;e.isLoading=r},addToys:function(e,t){e.products.push(t.product)},addToy:function(e,t){var r=t.toy;e.toys.push(r)},updateToy:function(e,t){var r=t.toy,n=e.toys.findIndex((function(e){return e._id===r._id}));e.toys.splice(n,1,r)},removeToy:function(e,t){var r=t.toyId,n=e.toys.findIndex((function(e){return e._id===r}));e.toys.splice(n,1)},setFilter:function(e,t){var r=t.filterBy;e.filterBy=r},setSort:function(e,t){var r=t.sortBy;e.sortBy=r}},actions:{loadToys:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r({type:"setLoading",isLoading:!0}),t.prev=2,t.next=5,Q.query();case 5:n=t.sent,r({type:"setToys",toys:n}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log("Problem with loading toys in store",t.t0);case 12:return t.prev=12,r({type:"setLoading",isLoading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))()},loadLabels:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Q.getLabels();case 4:n=t.sent,r({type:"setLabels",labels:n}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("store had problem with loading labels",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},saveToy:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,s=t.toy,n({type:"setLoading",isLoading:!0}),o=s._id?"updateToy":"addToy",r.prev=4,r.next=7,Q.save(s);case 7:return a=r.sent,n({type:o,toy:a}),r.abrupt("return",a);case 12:r.prev=12,r.t0=r["catch"](4),console.log("store had problem with ".concat(o,": ")+s,r.t0);case 15:return r.prev=15,n({type:"setLoading",isLoading:!1}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,12,15,18]])})))()},updateToy:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,s=t.toy,console.log("here(161:store)"),n({type:"setLoading",isLoading:!0}),r.prev=4,r.next=7,Q.save(s);case 7:return o=r.sent,n({type:"updateToy",toy:o}),r.abrupt("return",o);case 12:r.prev=12,r.t0=r["catch"](4),console.log("store had problem with updating toy: "+s,r.t0);case 15:return r.prev=15,n({type:"setLoading",isLoading:!1}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,12,15,18]])})))()},removeToy:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,s=t.toyId,n({type:"setLoading",isLoading:!0}),r.prev=3,r.next=6,Q.remove(s);case 6:n({type:"removeToy",toyId:s}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](3),console.log("store had problem with deleting toy: "+s,r.t0);case 12:return r.prev=12,n({type:"setLoading",isLoading:!1}),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[3,9,12,15]])})))()},setSort:function(e,t){var r=e.commit,n=t.sortBy;r({type:"setSort",sortBy:n})},setFilter:function(e,t){var r=e.commit,n=t.filterBy;r({type:"setFilter",filterBy:n})}}}),zt=(r("7db0"),{query:Jt,get:qt,post:Vt,put:Ft,remove:Dt});function Jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=JSON.parse(localStorage.getItem(e))||[];return new Promise((function(e){setTimeout((function(){e(r)}),t)}))}function qt(e,t){return Jt(e).then((function(e){return e.find((function(e){return e._id===t}))}))}function Vt(e,t){return t._id=Kt(),Jt(e).then((function(r){return r.push(t),Ht(e,r),t}))}function Ft(e,t){return Jt(e).then((function(r){var n=r.findIndex((function(e){return e._id===t._id}));return r.splice(n,1,t),Ht(e,r),t}))}function Dt(e,t){return Jt(e).then((function(r){var n=r.findIndex((function(e){return e._id===t}));if(n<0)throw new Error("Unknown Entity ".concat(t));r.splice(n,1),Ht(e,r)}))}function Ht(e,t){localStorage.setItem(e,JSON.stringify(t))}function Kt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}V.a.create({withCredentials:!0});var Yt={getUser:Qt,getUsers:Mt,deleteUser:Xt,updateUser:er};function Qt(e){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.get("user/".concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e["catch"](0),console.log("problem with getting user",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Gt.apply(this,arguments)}function Mt(){return Wt.apply(this,arguments)}function Wt(){return Wt=Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.get("user/");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e["catch"](0),console.log("problem with getting users",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Wt.apply(this,arguments)}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.delete("user/".concat(t._id));case 3:return e.abrupt("return","deleted");case 6:e.prev=6,e.t0=e["catch"](0),console.log("problem with deleting user"+t.username,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),Zt.apply(this,arguments)}function er(){}window.userService=Yt;var tr={strict:!0,state:{users:null},getters:{users:function(e){return JSON.parse(JSON.stringify(e.users))}},mutations:{setUsers:function(e,t){var r=t.users;e.users=r}},actions:{loadUsers:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Yt.getUsers();case 4:n=t.sent,r({type:"setUsers",users:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("problem with getting users",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},deleteUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.user,r.prev=2,r.next=5,Yt.deleteUser(s);case 5:return r.next=7,Yt.getUsers();case 7:o=r.sent,n({type:"setUsers",users:o.data}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](2),console.log("problem with getting users",r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()}}},rr=(r("159b"),r("daa8")),nr="review-added",sr="review-about-you",or="",ar=ir();function ir(){var e=null,t={setup:function(){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(rr["a"])(or);case 1:case"end":return t.stop()}}),t)})))()},on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}window.socketService=ar,ar.setup();var ur="user",cr="loggedinUser",lr=(V.a.create({withCredentials:!0}),{login:pr,logout:vr,signup:hr,getLoggedinUser:dr});function dr(){return JSON.parse(sessionStorage.getItem(cr))}function pr(e){return fr.apply(this,arguments)}function fr(){return fr=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("user",t),e.next=4,H.post("auth/login",t);case 4:return r=e.sent,console.log("authUser",r),sessionStorage.setItem(ur,JSON.stringify(r)),sessionStorage.setItem(cr,JSON.stringify(r)),ar.emit("set-user-socket",r._id),e.abrupt("return",r);case 12:e.prev=12,e.t0=e["catch"](0),console.log("problem with login auth ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),fr.apply(this,arguments)}function vr(){return mr.apply(this,arguments)}function mr(){return mr=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.post("auth/logout");case 3:return sessionStorage.removeItem(ur),sessionStorage.removeItem(cr),ar.emit("unset-user-socket"),e.abrupt("return","logout successfully");case 9:e.prev=9,e.t0=e["catch"](0),console.log("problem with logout auth ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),mr.apply(this,arguments)}function hr(e){return gr.apply(this,arguments)}function gr(){return gr=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("user in service",t),e.next=4,H.post("auth/signup",t);case 4:return r=e.sent,sessionStorage.setItem(ur,JSON.stringify(r)),sessionStorage.setItem(cr,JSON.stringify(r)),ar.emit("set-user-socket",r),e.abrupt("return",r);case 11:e.prev=11,e.t0=e["catch"](0),console.log("problem with signup auth ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),gr.apply(this,arguments)}window.authService=lr;var yr={strict:!0,state:{user:null},getters:{user:function(e){return JSON.parse(JSON.stringify(e.user))}},mutations:{setUser:function(e,t){var r=t.user;e.user=r},setLogout:function(e){e.user=null}},actions:{addUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.user,n({type:"setLoading",isLoading:!0}),r.prev=3,console.log("user from store",s),r.next=7,lr.signup(s);case 7:return o=r.sent,n({type:"setUser",user:o}),r.abrupt("return",o);case 12:r.prev=12,r.t0=r["catch"](3),console.log("Problem with addUser in store",r.t0);case 15:return r.prev=15,n({type:"setLoading",isLoading:!1}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[3,12,15,18]])})))()},login:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.user,n({type:"setLoading",isLoading:!0}),r.prev=3,r.next=6,lr.login(s);case 6:return o=r.sent,n({type:"setUser",user:o}),r.abrupt("return",o);case 11:r.prev=11,r.t0=r["catch"](3),console.log("Problem with login in store",r.t0);case 14:return r.prev=14,n({type:"setLoading",isLoading:!1}),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,11,14,17]])})))()},logout:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r({type:"setLoading",isLoading:!0}),t.prev=2,t.next=5,lr.logout();case 5:r({type:"setLogout"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),console.log("Problem with addUser in store",t.t0);case 11:return t.prev=11,r({type:"setLoading",isLoading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])})))()},loadUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit;try{n=lr.getLoggedinUser(),r({type:"setUser",user:n})}catch(err){console.log("problem with getting loggedUser",err)}case 2:case"end":return t.stop()}}),t)})))()}}},br={add:_r,query:wr,remove:jr};function wr(e){var t=e?"?name=".concat(e.name,"&sort=anaAref"):"";return H.get("review".concat(t))}function jr(e){return H.delete("review/".concat(e))}function _r(e){return xr.apply(this,arguments)}function xr(){return xr=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.post("review",t);case 2:return r=e.sent,e.next=5,Q.getById(t.aboutToyId);case 5:return r.aboutToy=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zt.query("review");case 2:t=e.sent,window.addEventListener("storage",Object(u["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Storage updated"),e.next=3,zt.query("review");case 3:r=e.sent,r.length===t.length+1&&(console.log("Review Added - localStorage updated from another browser"),ar.emit(nr,r[r.length-1])),t=r;case 6:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})))();var kr={state:{reviews:[]},getters:{reviews:function(e){return e.reviews}},mutations:{setReviews:function(e,t){var r=t.reviews;e.reviews=r},addReview:function(e,t){var r=t.review;e.reviews.push(r)},removeReview:function(e,t){var r=t.reviewId;e.reviews=e.reviews.filter((function(e){return e._id!==r}))}},actions:{addReview:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.review,r.prev=1,r.next=4,br.add(n);case 4:return s=r.sent,e.commit({type:"addReview",review:s}),r.abrupt("return",s);case 9:throw r.prev=9,r.t0=r["catch"](1),console.log("reviewStore: Error in addReview",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},loadReviews:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,br.query();case 3:r=t.sent,e.commit({type:"setReviews",reviews:r}),ar.off(nr),ar.on(nr,(function(t){console.log("Got review from socket",t),e.commit({type:"addReview",review:t})})),ar.off(sr),ar.on(sr,(function(e){console.log("Review about me!",e)})),t.next=15;break;case 11:throw t.prev=11,t.t0=t["catch"](0),console.log("reviewStore: Error in loadReviews",t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},removeReview:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.reviewId,r.prev=1,r.next=4,br.remove(n);case 4:e.commit({type:"removeReview",reviewId:n}),r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](1),console.log("reviewStore: Error in removeReview",r.t0),r.t0;case 11:case"end":return r.stop()}}),r,null,[[1,7]])})))()}}};n["default"].use(Pt["a"]);var Tr=new Pt["a"].Store({state:{},mutations:{},actions:{},modules:{toyStore:Nt,authStore:yr,userStore:tr,reviewStore:kr}}),Or=r("5c96"),Er=r.n(Or),Rr=(r("0fae"),r("9483"));Object(Rr["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("fb98");n["default"].config.productionTip=!1,n["default"].use(Er.a),new n["default"]({template:"\n        <section>\n            \x3c!-- <app-header/> --\x3e\n            <router-view/>\n        </section>\n    ",created:function(){this.$store.dispatch({type:"loadToys"}),this.$store.dispatch({type:"loadLabels"}),this.$store.dispatch({type:"loadUser"})},router:Ut,store:Tr,render:function(e){return e(g)}}).$mount("#app")},"7c52":function(e,t,r){"use strict";r("b732")},b732:function(e,t,r){},ebb8:function(e,t,r){e.exports=r.p+"img/loader.a6cd4c51.gif"},f737:function(e,t,r){e.exports=r.p+"img/teddy.707dbb81.png"},fb98:function(e,t,r){}});
//# sourceMappingURL=app.18459ec7.js.map